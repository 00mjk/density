version: 0.14.0.{build}
image: Visual Studio 2015
init:
- cmd:
install:
- cmd: >-
    set PATH=C:\Program Files\7-Zip;C:\ProgramData\chocolatey\bin;C:\Program Files\Git\cmd;C:\Program Files\Git\usr\bin;C:\projects\density\build\mingw64\bin\

    choco install wget

    cd build

    wget https://github.com/premake/premake-core/releases/download/v5.0.0-alpha12/premake-5.0.0-alpha12-windows.zip -nv -O premake5.zip

    7z x premake5.zip

    del premake5.zip

    wget https://qa.debian.org/watch/sf.php/mingw-w64/x86_64-7.2.0-release-posix-seh-rt_v5-rev1.7z -nv --no-check-certificate -O mingw.7z

    7z x mingw.7z

    del mingw.7z
build_script:
- cmd: >-
    premake5.exe gmake

    mingw32-make.exe CC=gcc.exe
test_script:
- cmd: bin\Release\benchmark.exe -f
